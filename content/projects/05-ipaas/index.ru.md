+++ 
priority    = 300
date        = 2024-01-23T19:02:35+03:00
categories  = ["project"]
draft       = false
title       = "iPaaS"
description = "API-платформа"
client      = "Merck"
roles       = ["DevOps engineer"]
skills      = ["Python", "Terraform", "Terragrunt", "Kubernetes", "AWS", "MuleSoft", "Flask", "Jenkins", "GitHub Actions"]
start       = "Jan 2024"
end         = "Dec 2024"
+++

## Обязанности:
В рамках проекта я принимал участие в разработке iPaaS-платформы в роли DevOps-инженера. Я работал с инфраструктурой, описанной с помощью Terraform.

## Что было сделано:
1. Реализован процесс бэкапа. Я реализовал процесс резервного копирования RDS согласно требованиям MERCK. Настроил регулярное создание бэкапов и их репликацию в S3-бакет.
2. Обеспечена отказоустойчивость RDS. Я переработал конфигурацию RDS — раньше использовалась одиночная база, теперь мы перешли на отказоустойчивый Multi-AZ кластер. В рамках задачи я также выполнил миграцию продакшен-данных для федеративной команды.
3. Разработана система алертов с нуля. Сначала я реализовал процесс отправки алертов. MERCK предоставляет API для отправки email-сообщений, и я создал веб-сервис для авторизации в этом API и отправки писем с содержанием алерта на заданный DL. Сервис был задеплоен в Kubernetes как часть платформы.
4. Далее я защитил эндпоинт SSL-сертификатом. Для этого потребовалось переработать конфигурацию cert-manager в Kubernetes и смонтировать корневой сертификат кластера в нужное место в контейнере Grafana.
В завершение я настроил правила алертов для существующей инфраструктуры: узлы EKS, квоты Kubernetes в Mulesoft, Nginx и логирование.
5. Автоматизировано создание Mulesoft RTF. Провайдер Terraform для Mulesoft не поддерживал нужные возможности для работы с агентами RTF, поэтому я автоматизировал создание этих ресурсов с помощью Python-скриптов и Mulesoft API. Для этого я использовал официальную документацию и обратную разработку запросов через DevTools в интерфейсе Anypoint.
6. Помог федеративным командам перейти на новую стратегию IAM-ролей для их AWS-аккаунтов.
